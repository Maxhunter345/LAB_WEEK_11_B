LAB WEEK 11 - ASSIGNMENT
Nama: Maxell Nathanael
NIM: 00000083239

1. Ketika user mengambil foto, bagian kode mana yang menyimpan file tersebut ke MediaStore?
Jawab:

   private fun insertToStore(
       fileInfo: FileInfo,
       contentUri: Uri,
       contentValues: ContentValues
   ) {
       executor.execute {
           val insertedUri = contentResolver.insert(contentUri, contentValues)
           insertedUri?.let {
               val inputStream = contentResolver.openInputStream(fileInfo.uri)
               val outputStream = contentResolver.openOutputStream(insertedUri)
               IOUtils.copy(inputStream, outputStream)
           }
       }
   }

Kode diatas ini mendapatkan InputStream dari file yang baru saja diambil (menggunakan URI FileProvider fileInfo.uri) dan dicopy ke OutputStream dari URI yang baru dibuat di MediaStore (insertedUri).


2. Pada file FileInfo.kt terdapat 5 atribut:
   - Apa yang dimaksud dengan atribut pertama `uri`?
   - Apa yang dimaksud dengan atribut keempat `relativePath`?

Jawab:
   - 'uri' adalah URI yang dihasilkan oleh FileProvider dan berfungsi sebagai handle atau alamat sementara yang memiliki izin terbatas (android:grantUriPermissions="true")  untuk diakses oleh aplikasi kamera. Aplikasi kamera menggunakan URI ini untuk menulis file foto/video.

   - `relativePath` adalah lokasi folder tempat file tersebut akan disimpan di MediaStore. Contohnya:
         Environment.DIRECTORY_PICTURES
         Environment.DIRECTORY_MOVIES
Ini memberi tahu MediaStore di folder mana file harus ditempatkan agar dapat diakses oleh aplikasi Galeri atau aplikasi lain.


3. Bonus: Jelaskan alur proses ketika user mengambil gambar hingga file muncul di MediaStore.
Jawab:
   Langkah-langkah lengkapnya:
   1. Pengguna menekan tombol "Photo".
   2. Aplikasi memanggil checkStoragePermission untuk memastikan izin WRITE_EXTERNAL_STORAGE ada (untuk Android 9 ke bawah).
   3. Setelah izin (permission), aplikasi memanggil `generatePhotoUri()`
      yang membuat FileInfo berisi:
      - file kosong untuk menampung hasil foto
      - nama file (misal: img_1234.jpg)
      - URI FileProvider untuk kamera menulis file
   4. Aplikasi memanggil `takePictureLauncher.launch(uri)`.
   5. Kamera bisa dibuka & foto yang dibuat ditulis ke URI tersebut.
   6. Setelah kamera selesai, callback ActivityResultContracts.TakePicture()
      dipanggil dan aplikasi memanggil `insertImageToStore(photoInfo)`.
   7. `insertToStore()` copy file dari lokasi FileProvider ke MediaStore
      dengan menggunakan inputStream + outputStream.
   8. MediaStore menyimpan file di folder sesuai relativePath bisa Pictures/, Movies/
   9. File kini tersedia untuk aplikasi Gallery dan aplikasi lain, sehingga dapat dilihat di aplikasi Galeri.